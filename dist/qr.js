(()=>{"use strict";const t=[[[16,1,0,10],[19,1,0,7],[9,1,0,17],[13,1,0,13]],[[28,1,0,16],[34,1,0,10],[16,1,0,28],[22,1,0,22]],[[44,1,0,26],[55,1,0,15],[13,2,0,22],[17,2,0,18]],[[32,2,0,18],[80,1,0,20],[9,4,0,16],[24,2,0,26]],[[43,2,0,24],[108,1,0,26],[11,2,2,22],[15,2,2,18]],[[27,4,0,16],[68,2,0,18],[15,4,0,28],[19,4,0,24]],[[31,4,0,18],[78,2,0,20],[13,4,1,26],[14,2,4,18]],[[38,2,2,22],[97,2,0,24],[14,4,2,26],[18,4,2,22]],[[36,3,2,22],[116,2,0,30],[12,4,4,24],[16,4,4,20]],[[43,4,1,26],[68,2,2,18],[15,6,2,28],[19,6,2,24]],[[50,1,4,30],[81,4,0,20],[12,3,8,24],[22,4,4,28]],[[36,6,2,22],[92,2,2,24],[14,7,4,28],[20,4,6,26]],[[37,8,1,22],[107,4,0,26],[11,12,4,22],[20,8,4,24]],[[40,4,5,24],[115,3,1,30],[12,11,5,24],[16,11,5,20]],[[41,5,5,24],[87,5,1,22],[12,11,7,24],[24,5,7,30]],[[45,7,3,28],[98,5,1,24],[15,3,13,30],[19,15,2,24]],[[46,10,1,28],[107,1,5,28],[14,2,17,28],[22,1,15,28]],[[43,9,4,26],[120,5,1,30],[14,2,19,28],[22,17,1,28]],[[44,3,11,26],[113,3,4,28],[13,9,16,26],[21,17,4,26]],[[41,3,13,26],[107,3,5,28],[15,15,10,28],[24,15,5,30]],[[42,17,0,26],[116,4,4,28],[16,19,6,30],[22,17,6,28]],[[46,17,0,28],[111,2,7,28],[13,34,0,24],[24,7,16,30]],[[47,4,14,28],[121,4,5,30],[15,16,14,30],[24,11,14,30]],[[45,6,14,28],[117,6,4,30],[16,30,2,30],[24,11,16,30]],[[47,8,13,28],[106,8,4,26],[15,22,13,30],[24,7,22,30]],[[46,19,4,28],[114,10,2,28],[16,33,4,30],[22,28,6,28]],[[45,22,3,28],[122,8,4,30],[15,12,28,30],[23,8,26,30]],[[45,3,23,28],[117,3,10,30],[15,11,31,30],[24,4,31,30]],[[45,21,7,28],[116,7,7,30],[15,19,26,30],[23,1,37,30]],[[47,19,10,28],[115,5,10,30],[15,23,25,30],[24,15,25,30]],[[46,2,29,28],[115,13,3,30],[15,23,28,30],[24,42,1,30]],[[46,10,23,28],[115,17,0,30],[15,19,35,30],[24,10,35,30]],[[46,14,21,28],[115,17,1,30],[15,11,46,30],[24,29,19,30]],[[46,14,23,28],[115,13,6,30],[16,59,1,30],[24,44,7,30]],[[47,12,26,28],[121,12,7,30],[15,22,41,30],[24,39,14,30]],[[47,6,34,28],[121,6,14,30],[15,2,64,30],[24,46,10,30]],[[46,29,14,28],[122,17,4,30],[15,24,46,30],[24,49,10,30]],[[46,13,32,28],[122,4,18,30],[15,42,32,30],[24,48,14,30]],[[47,40,7,28],[117,20,4,30],[15,10,67,30],[24,43,22,30]],[[47,18,31,28],[118,19,6,30],[15,20,61,30],[24,34,34,30]]],e=[[6],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],n=[function(t,e){return(t+e)%2},function(t,e){return e%2},function(t,e){return t%3},function(t,e){return(t+e)%3},function(t,e){return(Math.floor(e/2)+Math.floor(t/3))%2},function(t,e){return t*e%2+t*e%3},function(t,e){return(t*e%3+t*e)%2},function(t,e){return(t*e%3+t+e)%2}],i=[1,2,4,8];class r{constructor(t){this.next_bit=7,this.next_byte=0,this.bytes=new Uint8Array(t)}bits_written(){return 8*this.next_byte+(7-this.next_bit)}write_bit(t){this.bytes[this.next_byte]|=t<<this.next_bit,this.next_bit--,this.next_bit<0&&(this.next_bit=7,this.next_byte++)}write_bits(t,e){for(let n=e-1;n>=0;n--)this.write_bit(t>>>n&1)}get_bytes(){return this.bytes}}function o(t){let e=-1;for(;0!=t;)e++,t>>>=1;return e}const s=new class{constructor(t){let e=1<<o(t);this.modulus=e-1,this.exps=new Array(this.modulus),this.logs=new Array(this.modulus+1);let n=1;for(let i=0;i<this.modulus;i++)this.exps[i]=n,this.logs[n]=i,n<<=1,n&e&&(n^=t)}add(t,e){return t^e}subtract(t,e){return t^e}mult(t,e){return this.exps[(this.logs[t]+this.logs[e])%this.modulus]}inverse(t){return this.exps[this.modulus-this.logs[t]]}divide(t,e){return this.exps[(this.logs[t]+this.modulus-this.logs[e])%this.modulus]}power(t,e){let n=this.logs[t];return e<0&&(n-=this.modulus),this.exps[n*e%this.modulus]}}(285);class l{constructor(t){this.field=t}mult(t,e){const n=new Array(t.length+e.length-1);for(let i=0;i<t.length;i++)for(let r=0;r<e.length;r++)n[i+r]=this.field.add(n[i+r],this.field.mult(t[i],e[r]));return n}remainder(t,e){if(0==e.length)throw new Error("Division by zero");let n=0;const i=t.length-e.length+1;for(;n<i;){let i=this.field.divide(t[n],e[0]);for(let r=1;r<e.length;r++)t[n+r]=this.field.subtract(t[n+r],this.field.mult(e[r],i));n+=1}return t.slice(i)}generator(t){let e=[1];for(let n=0;n<t;n++)e=this.mult(e,[1,this.field.power(2,n)]);return e}}function h(t,e){return(t<<=o(e))^function(t,e){let n=o(t);const i=o(e);for(;n>=i;)n=o(t^=e<<n-i);return t}(t,e)}class u{constructor(t){this.extra_symbols=t,this.ring=new l(s),this.generator=this.ring.generator(t)}encode(t){let e=new Uint8Array(t.length+this.extra_symbols);for(let n=0;n<t.length;n++)e[n]=t[n];for(let n=0;n<this.extra_symbols;n++)e[t.length+n]=0;return this.ring.remainder(e,this.generator)}}const c=[function(t,e){},function(t,e){},function(t,e){for(let n=0;n<e.length;n++){const i=e.charCodeAt(n);if(i>255)throw new Error("Invalid character");t.write_bits(i,8)}},function(t,e){}];function f(t){return t?1:2}function d(t,e,n,i,r){for(let o=0;o<i;o++)for(let s=0;s<i;s++)t[e+o][n+s]=r}function g(t,e,n){d(t,e,n,7,1),d(t,e+1,n+1,5,2),d(t,e+2,n+2,3,1)}function a(t,e,n){return(e<6?e:e-1)%2==1?[e-1,n]:Math.floor((e<6?e:e-1)/2)%2==0?n===t-1?[e-1,n]:[e+1,n+1]:0===n?[7===e?5:e-1,n]:[e+1,n-1]}document.addEventListener("DOMContentLoaded",(()=>{const o=document.getElementById("qr-message"),s=document.getElementById("qr-version"),l=document.getElementById("qr-mode"),w=document.getElementById("qr-mask"),m=document.getElementById("qr-canvas"),b=m.getContext("2d"),y=document.getElementById("qr-download");function _(){this.nextElementSibling.value=this.value,x()}function x(){const y=o.value,_=parseInt(s.value),x=[1,0,3,2][parseInt(l.value)],p=parseInt(w.value);let v;try{v=function(o,s,l,w){const m=function(t,n,i){const r=4*t+17,o=[];for(let t=0;t<r;t++){const t=new Uint8Array(r);t.fill(0),o.push(t)}d(o,0,0,8,2),d(o,r-8,0,8,2),d(o,0,r-8,8,2),g(o,0,0),g(o,r-7,0),g(o,0,r-7);for(let t=8;t<r-8;t++){const e=t%2==0?1:2;o[t][6]=e,o[6][t]=e}const s=function(t){const n=e[t-1],i=[],r=n.length-1;for(let t=0;t<n.length;t++)for(let e=0;e<n.length;e++)0==t&&0==e||t==r&&0==e||0==t&&e==r||i.push([n[t],n[e]]);return i}(t);for(let t=0;t<s.length;t++){const[e,n]=s[t];d(o,e-2,n-2,5,1),d(o,e-1,n-1,3,2),o[e][n]=1}if(t>=7){const e=function(t){return h(t,7973)}(t);!function(t,e){const n=t.length;let i=17;for(let r=0;r<6;r++)for(let o=0;o<3;o++)t[5-r][n-9-o]=f(e>>i&1),t[n-9-o][5-r]=f(e>>i&1),i-=1}(o,e)}const l=function(t,e){return 21522^h(t<<3^e,1335)}(n,i);return function(t,e){const n=t.length;for(let n=0;n<6;n++)t[n][8]=f(e>>14-n&1);for(let n=0;n<2;n++)t[7+n][8]=f(e>>8-n&1);t[8][7]=f(e>>6&1);for(let n=0;n<6;n++)t[8][5-n]=f(e>>5-n&1);for(let i=0;i<7;i++)t[8][n-1-i]=f(e>>14-i&1);for(let i=0;i<8;i++)t[n-8+i][8]=f(e>>7-i&1)}(o,l),o[8][r-8]=1,o}(o,s,l);return function(t,e,i){const r=t.length,o=function(t){const e=n[t];return function(t,n,i){return(e(t,n)>0?0:1)^i}}(i);let[s,l]=[r-1,r-1];for(let n=0;n<e.length;n++)for(let i=0;i<8;i++){for(;0!==t[s][l];)[s,l]=a(r,s,l);let h=e[n]>>7-i&1;t[s][l]=f(o(s,l,h)),[s,l]=a(r,s,l)}for(;s>=0;)0===t[s][l]&&(t[s][l]=f(o(s,l,0))),[s,l]=a(r,s,l)}(m,function(e,n,o,s){const l=function(e,n){const i=t[e-1][n],r=[],o=i[0],s=i[1],l=i[2];for(let t=0;t<s;t++)r.push(o);for(let t=0;t<l;t++)r.push(o+1);return r}(n,o);let h=l[l.length-1],f=0;for(let t=0;t<l.length;t++)f+=l[t];let d=new r(f);const g=8*f;d.write_bits(i[s],4);const a=function(t,e){let n;return n=t<10?[10,9,8,8]:t<27?[12,11,16,10]:[14,13,16,12],n[e]}(n,s);d.write_bits(e.length,a),(0,c[s])(d,e);let w=d.bits_written();if(w>g)throw new Error("Message is too long");const m=Math.min(4,g-w);d.write_bits(0,m);const b=(w+m)%8;b>0&&d.write_bits(0,8-b),w=d.bits_written();let y=!0;for(let t=w;t<g;t+=8)y?d.write_bits(236,8):d.write_bits(17,8),y=!y;const _=[],x=[],p=function(e,n){return t[e-1][n][3]}(n,o),v=new u(p);let E=0;const I=d.get_bytes();for(let t=0;t<l.length;t++){const e=l[t],n=I.slice(E,E+e);_.push(n),x.push(v.encode(n)),E+=e}const A=new Uint8Array(f+p*x.length);let L=0;for(let t=0;t<h;t++)for(let e=0;e<_.length;e++)t<_[e].length&&(A[L]=_[e][t],L+=1);for(let t=0;t<p;t++)for(let e=0;e<x.length;e++)A[L]=x[e][t],L+=1;return A}(w,o,s,2),l),m}(_,x,p,y)}catch(t){return b.clearRect(0,0,m.width,m.height),b.fillStyle="red",b.beginPath(),b.arc(m.width/2,m.height/2,m.width/4,0,2*Math.PI),b.fill(),b.fillStyle="black",b.font="24px sans-serif",b.textAlign="center",b.textBaseline="bottom",b.fillText(t.message,m.width/2,m.height-60),b.beginPath(),b.strokeStyle="white",b.lineWidth=20,b.moveTo(m.width/2-60,m.height/2-60),b.lineTo(m.width/2+60,m.height/2+60),b.moveTo(m.width/2+60,m.height/2-60),b.lineTo(m.width/2-60,m.height/2+60),void b.stroke()}const E=v.length,I=Math.floor(420/E);m.width=E*I+80,m.height=E*I+80,b.fillStyle="white",b.fillRect(0,0,m.width,m.height);for(let t=0;t<E;t++)for(let e=0;e<E;e++)b.fillStyle="gray",1===v[t][e]&&(b.fillStyle="black"),2===v[t][e]&&(b.fillStyle="white"),b.fillRect(40+t*I,40+e*I,I,I)}o.addEventListener("input",x),s.addEventListener("input",_),l.addEventListener("input",(function(){this.nextElementSibling.value=["L","M","Q","H"][parseInt(this.value)],x()})),w.addEventListener("input",_),y.addEventListener("click",(function(){const t=m.toDataURL("image/png");this.download="qr.png",this.href=t}),!1),x()}))})();